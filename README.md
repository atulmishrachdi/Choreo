
[<img src="http://digitalstructures.mit.edu/theme/digistruct/images/digital-structures-logo-gray.svg" width="150">](http://digitalstructures.mit.edu/) Choreo
===
**Choreo: robotic motion planning platform for discrete architectural assembly**

- Author: 	Yijiang Huang
- Advisor:	[Prof. Caitlin Mueller](http://www.caitlinmueller.com/)
- Email: 	<yijiangh@mit.edu>
- Devel Status:	WIP, [ROS-Kinetic](http://wiki.ros.org/kinetic/Installation)

- UROP Alumni: Thomas Cook (MIT)

Development mainly on *kuka_kr6r900sixx robot* for now.

# :construction: In Construction! :construction:

## Installation
- Install ROS-Kinetic on Ubuntu 16.04 following the instructions [here](http://wiki.ros.org/kinetic/Installation/Ubuntu)

- Install [python_catkin_tools](http://catkin-tools.readthedocs.io/en/latest/index.html) to enable ```catkin build```.
  ```
  sudo apt-get install python-catkin-tools
  ```

- Install [wstool](http://wiki.ros.org/wstool) in order manage the repos inside the workspace
  ```
  sudo apt install python-wstool
  ```

- Install [moveit](http://moveit.ros.org/install/).
  ```
  sudo apt-get install ros-kinetic-moveit
  ```

- Install [rviz visual tools](https://github.com/davetcoleman/rviz_visual_tools) for pose visualization.
  ```
  sudo apt-get install ros-kinetic-rviz-visual-tools
  ```

- Cd into the 'src' directory of your catkin workspace (```~/catkin_ws/src``` in my case) and run the following:
  ```
  wstool init . 
  wstool merge https://github.com/yijiangh/framefab_mpp/raw/kinetic-devel/framefab_mpp.rosinstall
  wstool update
  rosdep install --from-paths . --ignore-src
  ```

- Finally, to build:
  ```
  cd ~/catkin_ws (your catkin workspace root)
  catkin build
  source devel/setup.bash
  ```

## Application

# :construction: Outdated! :construction:

To launch the application:
```
roslaunch framefab_kr6_r900_support kr6_r900_framefab.launch
```
We should be able to launch the app as the pciture below shows if everything goes smoothly:

[![20170813112307.png](https://s30.postimg.org/cdrtiyk2p/20170813112307.png)](https://postimg.org/image/5ajy3cen1/)

For the first launch, we should tell framefab_mpp where to locate the input model file:

1. Click on ```Params``` Button.

2. Click on ```Path Input``` Button.

3. Click on ```input dir``` Button to choose input file path. For demonstration purpose, we offer two example files:
simple_frame_result.json and bunny_result.json, located in ```~/catkin_ws/src/framefab_mpp/framefab_core/data```.[1]

4. Click on ```Save``` button after selection for save and accept this file path. The saved file path will be automatically loaded unless you choose and save a new one following step 1 - 3. ```Accept``` button is used for one-shot entering: the entered file path will not be saved.

5. Close the Params panel by clicking on the red cross icon of the window.

6. Click on ```Next``` button to continue.

You'll see this if you choosed simple_frame_result.json in step 3.The arrow shows the direction of the printing (start and end nodes). Blue elements are supporting elements (pillars). The reds are connecting elements (connecting two existed nodes). The blues are creating elements (one end of the element will be created).

[![20170813114224.png](https://s28.postimg.org/6aip3rujh/20170813114224.png)](https://postimg.org/image/x8cm5if6h/)

7. View the construction sequence by dragging the slider, clicking on the ```<``` and ```>``` button or entering desired number in the text box. Click on ```Plan``` button to tell the planner to plan until the index you choose or click on ```Select All``` to plan for all elements in the model. The Grey elements are printed elements in the chosen state. The transparent one is the one to be printed. The green lines at starting node indicate all the feasible orientations (computed by [framefab](https://github.com/yijiangh/FrameFab)) for end effector for printing the current element (transparent one).

[![20170813114704.png](https://s21.postimg.org/eaqh3tl1j/20170813114704.png)](https://postimg.org/image/rew1gid37/)

8. After planning is finished, click on ```Next``` to check the simulation.

[1] Please note that the input file format here is a customized json format, generated by a sequence finding software [framefab](https://github.com/yijiangh/FrameFab). Integration of framefab into this package is still in progress.

